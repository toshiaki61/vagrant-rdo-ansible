---
- include: playbooks/common.yml
- include: playbooks/controller.yml
- include: playbooks/network.yml
- include: playbooks/compute.yml
- include: playbooks/block.yml
- include: playbooks/storage.yml
- include: playbooks/proxy.yml

- hosts: storage-node
  sudo: yes
  tasks:
    - service: name={{ item }} state=running enabled=yes
      with_items: 
        - openstack-swift-object
        - openstack-swift-object-replicator
        - openstack-swift-object-updater
        - openstack-swift-object-auditor
        - openstack-swift-container
        - openstack-swift-container-replicator
        - openstack-swift-container-updater
        - openstack-swift-container-auditor
        - openstack-swift-account
        - openstack-swift-account-replicator
        - openstack-swift-account-reaper
        - openstack-swift-account-auditor
      tags: swift-storage
